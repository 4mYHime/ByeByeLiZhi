{"version":3,"sources":["style.js","music/menu/style.js","music/menu/index.tsx","music/playbar/style.js","music/playbar/index.tsx","music/comment/style.js","music/comment/index.tsx","music/style.js","music/index.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["GlobalStyle","createGlobalStyle","MenuWrapper","styled","div","Menu","MenuCover","img","MenuText","MusicWrapper","MusicContent","MusicItem","ReturnBtn","span","Menus","state","category","this","setState","contents","menu","props","list","find","item","music","id","curCateId","curMusicId","musics","map","index","cateId","musicId","key","className","onClick","onClickMusic","String","name","handleReturnClick","bind","cate","hanleMenuClick","src","cover","Component","PlayBarWrapper","ControlBtn","Btn","Progress","ProgressTitle","ProgressBar","ProgressContent","ProgressTime","Voice","VoiceIcon","VoiceBar","VoiceContent","PlayBar","audioElement","isPause","currentTime","duration","ratio","getRatio","voiceRatio","document","title","pause","play","time","Math","floor","substring","now","total","readyState","jumpMusic","event","getOffsetRatio","volume","currentTarget","getBoundingClientRect","width","left","clientX","offset","forEach","length","findIndex","nextIndex","playclass","currentTimeStr","getTimeString","durationStr","handlePrevClick","handlePausePlay","handleNextClick","handleProgressClick","style","handleVoiceClick","autoPlay","ref","el","onPlay","handleAudioPlay","onTimeUpdate","handleTimeupdate","onEnded","CommentWrapper","App","MusicPlay","arg","musicList","handleChangeMusic","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"whaAEO,IAAMA,EAAcC,YAAH,K,6hECAjB,IAAMC,EAAcC,IAAOC,IAAV,KAaXC,EAAOF,IAAOC,IAAV,KAQJE,EAAYH,IAAOI,IAAV,KAMTC,EAAWL,IAAOC,IAAV,KAORK,EAAeN,IAAOC,IAAV,KAKZM,EAAeP,IAAOC,IAAV,KAOZO,EAAYR,IAAOC,IAAV,KAgBTQ,EAAYT,IAAOU,KAAV,KC1CDC,GDwDWX,IAAOI,IAAV,K,2MCvD3BQ,MAAQ,CACJC,UAAW,G,8EAEDA,GACdC,KAAKC,SAAS,CAAEF,e,0CAGhBC,KAAKC,SAAS,CAAEF,UAAW,M,+BAEjB,IAGNG,EAHK,OACHC,EAAkCH,KAAKI,MAAMC,KAAKC,MAAK,SAAAC,GAAI,OAAIA,EAAKR,WAAa,EAAKD,MAAMC,YADzF,cAEuBC,KAAKI,MAAMI,MAAMC,GAFxC,GAEFC,EAFE,KAESC,EAFT,KAgCT,OA5BIR,GACHD,EAAWC,EAAKS,OAAOC,KAAI,SAACL,EAAOM,GAAW,IAAD,cAClBN,EAAMC,GADY,GACrCM,EADqC,KAC7BC,EAD6B,KAE5C,OACC,kBAACtB,EAAD,CACCuB,IAAKD,EACLE,UAAWH,IAAWL,GAAaM,IAAYL,EAAa,SAAU,GACtEQ,QAAS,WAAQ,EAAKf,MAAMgB,aAAaZ,KACvCa,OAAOP,EAAQ,GAAI,KAAON,EAAMc,SAIrCpB,EACC,kBAACV,EAAD,KACC,kBAACG,EAAD,CAAWwB,QAASnB,KAAKuB,kBAAkBC,KAAKxB,MAAOkB,UAAU,yBACjE,kBAACzB,EAAD,KAAeS,KAIjBA,EAAWF,KAAKI,MAAMC,KAAKQ,KAAI,SAAAY,GAC9B,OACC,kBAACrC,EAAD,CAAM+B,QAAS,EAAKO,eAAeF,KAAK,EAAMC,EAAK1B,UAAWkB,IAAKQ,EAAK1B,UACvE,kBAACV,EAAD,CAAWsC,IAAKF,EAAKG,QACrB,kBAACrC,EAAD,KAAWkC,EAAKH,UAKb,kBAACrC,EAAD,KAAciB,O,GA1CY2B,c,6kFCpB5B,IAAMC,EAAiB5C,IAAOC,IAAV,KAYd4C,EAAa7C,IAAOC,IAAV,KAKV6C,EAAM9C,IAAOU,KAAV,KAWHqC,EAAW/C,IAAOC,IAAV,KAUR+C,EAAgBhD,IAAOC,IAAV,KAIbgD,EAAcjD,IAAOC,IAAV,KAUXiD,GAAkBlD,IAAOC,IAAV,KAkBfkD,GAAenD,IAAOC,IAAV,KAIZmD,GAAQpD,IAAOC,IAAV,KAMLoD,GAAYrD,IAAOU,KAAV,KAST4C,GAAWtD,IAAOC,IAAV,KAURsD,GAAevD,IAAOC,IAAV,KCvEJuD,G,YASnB,WAAYtC,GAAsB,IAAD,8BAC7B,4CAAMA,KATVuC,aAAwC,KAQP,EAPjC7C,MAAQ,CACJ8C,SAAS,EACTC,YAAa,EACbC,SAAU,EACVC,MAAO,EAAKC,SAAS,GACrBC,WAAY,EAAKD,SAAS,EAAG,IAEA,E,kFAI7BE,SAASC,MAAQnD,KAAKI,MAAMI,MAAMc,MAAQ,gC,8BAG1CtB,KAAK2C,cAAgB3C,KAAK2C,aAAaS,U,6BAGvCpD,KAAK2C,cAAgB3C,KAAK2C,aAAaU,S,oCAE7BC,GAGZ,OAFW,IAAMC,KAAKC,MAAMF,EAAO,KAAKG,UAAU,EAAG,GAE1C,KADA,IAAMF,KAAKC,MAAMF,EAAO,KAAKG,UAAU,EAAG,K,iCAGD,IAA7CC,EAA4C,uDAA9B,EAAGC,EAA2B,uDAAX,EACxC,OAAiB,IAAVA,EAAc,KAAQD,EAAMC,EAAS,IAAM,M,wCAG3C3D,KAAK2C,eAC2B,IAAjC3C,KAAK2C,aAAaiB,WACpB5D,KAAKI,MAAMgB,aAAapB,KAAKI,MAAMC,KAAK,GAAGO,OAAO,KAElDZ,KAAKF,MAAM8C,QAAU5C,KAAKqD,OAASrD,KAAKoD,QACxCpD,KAAKC,UAAS,SAAAH,GAAK,MAAK,CAAE8C,SAAU9C,EAAM8C,gB,yCAI9C,GAAK5C,KAAK2C,aAAV,CADiB,MAEiB3C,KAAK2C,aAA/BE,EAFS,EAETA,YAAaC,EAFJ,EAEIA,SACrB9C,KAAKC,SAAS,CACZ4C,YAAaA,GAAe,EAC5BC,SAAUA,GAAY,EACtBC,MAAO/C,KAAKgD,SAASH,EAAaC,Q,wCAIpC9C,KAAKC,UAAS,SAAAH,GAAK,MAAK,CAAE8C,SAAS,Q,wCAGnC5C,KAAK6D,WAAW,K,wCAGhB7D,KAAK6D,UAAU,K,0CAEGC,GAClB,IACMjB,EADQ7C,KAAK+D,eAAeD,GACN9D,KAAKF,MAAMgD,SACvC9C,KAAK2C,eAAiB3C,KAAK2C,aAAaE,YAAcA,K,uCAEvCiB,GACf,IAAMf,EAAQ/C,KAAK+D,eAAeD,GAClC9D,KAAK2C,eAAiB3C,KAAK2C,aAAaqB,OAASjB,GACjD/C,KAAKC,SAAS,CAACgD,WAAoB,IAARF,EAAc,Q,qCAE5Be,GAAqB,IAAD,EACTA,EAAMG,cAAcC,wBAApCC,EADyB,EACzBA,MAAOC,EADkB,EAClBA,KACTrB,GAASe,EAAMO,QAAUD,GAAQD,EACvC,OAAOpB,EAAQ,EAAI,EAAKA,EAAQ,EAAI,EAAIA,I,gCAEhCuB,GAAiB,IAAD,qBACQtE,KAAKI,MAAMI,MAAMC,GADzB,GACjBC,EADiB,KACNC,EADM,KAExBX,KAAKI,MAAMC,KAAKkE,SAAQ,SAAA9C,GACtB,GAAIA,EAAK1B,WAAaW,OAAtB,CACE,IAAM8D,EAAS/C,EAAKb,OAAO4D,OACrB1D,EAAQW,EAAKb,OAAO6D,WAAU,SAAAjE,GAAK,OAAIA,EAAMC,GAAG,KAAOE,KACvD+D,GAAaJ,EAASE,EAASA,EAAS1D,GAAS0D,EACvD,EAAKpE,MAAMgB,aAAaK,EAAKb,OAAO8D,U,+BAKhC,IAAD,OACCC,EAAY,kBAAoB3E,KAAKF,MAAM8C,QAAU,SAAW,WAChEgC,EAAiB5E,KAAK6E,cAAc7E,KAAKF,MAAM+C,aAC/CiC,EAAc9E,KAAK6E,cAAc7E,KAAKF,MAAMgD,UAClD,OACI,kBAAChB,EAAD,KACI,kBAACC,EAAD,KACI,kBAACC,EAAD,CAAKd,UAAU,6BAA6BC,QAASnB,KAAK+E,gBAAgBvD,KAAKxB,QAC/E,kBAACgC,EAAD,CAAKd,UAAWyD,EAAWxD,QAASnB,KAAKgF,gBAAgBxD,KAAKxB,QAC9D,kBAACgC,EAAD,CAAKd,UAAU,0BAA0BC,QAASnB,KAAKiF,gBAAgBzD,KAAKxB,SAEhF,kBAACiC,EAAD,KACE,kBAACC,EAAD,KAAgBlC,KAAKI,MAAMI,MAAMc,MACjC,kBAACe,GAAD,KAAeuC,EAAiB,MAAQE,GACxC,kBAAC3C,EAAD,CAAahB,QAASnB,KAAKkF,oBAAoB1D,KAAKxB,OAClD,kBAACoC,GAAD,CAAiB+C,MAAO,CAAEhB,MAAOnE,KAAKF,MAAMiD,WAGhD,kBAACT,GAAD,KACE,kBAACC,GAAD,CAAWrB,UAAU,2BACrB,kBAACsB,GAAD,CAAUrB,QAASnB,KAAKoF,iBAAiB5D,KAAKxB,OAC5C,kBAACyC,GAAD,CAAc0C,MAAO,CAAEhB,MAAOnE,KAAKF,MAAMmD,gBAG7C,2BACEoC,UAAQ,EACR1D,IAAK3B,KAAKI,MAAMI,MAAMmB,IACtB2D,IAAK,SAAAC,GAAE,OAAI,EAAK5C,aAAe4C,GAC/BC,OAAQxF,KAAKyF,gBAAgBjE,KAAKxB,MAClC0F,aAAc1F,KAAK2F,iBAAiBnE,KAAKxB,MACzC4F,QAAS5F,KAAKiF,gBAAgBzD,KAAKxB,a,GAjHd6B,a,6RC5B9B,IAAMgE,GAAiB3G,IAAOC,IAAV,MCSZ2G,GARO,WACpB,OACE,kBAACD,GAAD,iB,wLCHG,IAAMrG,GAAeN,IAAOC,IAAV,MCWJ4G,G,YASnB,WAAYC,GAAW,IAAD,8BACpB,4CAAMA,KATRlG,MAAQ,CACNU,MAAO,CACLC,GAAI,CAAC,EAAG,GACRa,KAAM,6CACNK,IAAK,IAEPsE,cAIA,EAAKC,kBAAoB,EAAKA,kBAAkB1E,KAAvB,gBAFL,E,+EAIJhB,GAChBR,KAAKC,SAAS,CAAEO,Y,+BAGhB,OACE,kBAAC,WAAD,KACE,kBAAC,GAAD,KACE,kBAAC,EAAD,CAAMH,KAAML,KAAKF,MAAMmG,UAAWzF,MAAOR,KAAKF,MAAMU,MAAOY,aAAcpB,KAAKkG,oBAC9E,kBAAC,GAAD,OAEF,kBAAC,GAAD,CAAQ7F,KAAML,KAAKF,MAAMmG,UAAWzF,MAAOR,KAAKF,MAAMU,MAAOY,aAAcpB,KAAKkG,yB,GAvBjDrE,aCCxBiE,GATO,WACpB,OACE,yBAAK5E,UAAU,OACb,kBAACnC,EAAD,MACA,kBAAC,GAAD,QCGcoH,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,MCZNC,IAASC,OAAO,kBAAC,GAAD,MAASvD,SAASwD,eAAe,SDmI3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.0bababfb.chunk.js","sourcesContent":["import { createGlobalStyle } from 'styled-components';\n\nexport const GlobalStyle = createGlobalStyle`\n\thtml, body, div, span, applet, object, iframe,\n\th1, h2, h3, h4, h5, h6, p, blockquote, pre,\n\ta, abbr, acronym, address, big, cite, code,\n\tdel, dfn, em, img, ins, kbd, q, s, samp,\n\tsmall, strike, strong, sub, sup, tt, var,\n\tb, u, i, center,\n\tdl, dt, dd, ol, ul, li,\n\tfieldset, form, label, legend,\n\ttable, caption, tbody, tfoot, thead, tr, th, td,\n\tarticle, aside, canvas, details, embed, \n\tfigure, figcaption, footer, header, hgroup, \n\tmenu, nav, output, ruby, section, summary,\n\ttime, mark, audio, video {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tborder: 0;\n\t\tfont-size: 100%;\n\t\tfont: inherit;\n\t\tvertical-align: baseline;\n\t}\n\t/* HTML5 display-role reset for older browsers */\n\tarticle, aside, details, figcaption, figure, \n\tfooter, header, hgroup, menu, nav, section {\n\t\tdisplay: block;\n\t}\n\tbody {\n        line-height: 1;\n\t}\n\tol, ul {\n\t\tlist-style: none;\n\t}\n\tblockquote, q {\n\t\tquotes: none;\n\t}\n\tblockquote:before, blockquote:after,\n\tq:before, q:after {\n\t\tcontent: '';\n\t\tcontent: none;\n\t}\n\ttable {\n\t\tborder-collapse: collapse;\n\t\tborder-spacing: 0;\n    }\n    html, body, #root, .app {\n        height: 100%;\n        width: 100%;\n    }\n`;\n","import styled from 'styled-components';\n\nexport const MenuWrapper = styled.div`\n    position: absolute;\n    left: 10%;\n    top 10%;\n    width: 50%;\n    height: 80%;\n    overflow: hidden;\n    margin: auto;\n    box-shadow: 0 0 10px #ddd;\n    background: white;\n    border-radius: 4px;\n`;\n\nexport const Menu = styled.div`\n    width: 20%;\n    margin-top: 50px;\n    margin-left: 10%;\n    display: inline-block;\n    cursor: pointer;\n`;\n\nexport const MenuCover = styled.img`\n    display: block;\n    border-radius: 4px;\n    width: 100%;\n`;\n\nexport const MenuText = styled.div`\n    padding: 12px 0;\n    text-align: center;\n    color: #333;\n    font-size: 14px;\n`;\n\nexport const MusicWrapper = styled.div`\n    height: 100%;\n    box-sizing: border-box;\n`;\n\nexport const MusicContent = styled.div`\n    padding: 0 50px 50px 50px;\n    height: calc(100% - 90px);\n    overflow: auto;\n    box-sizing: border-box;\n`;\n\nexport const MusicItem = styled.div`\n    padding: 16px 40px;\n    font-size: 14px;\n    color: #333;\n    cursor: pointer;\n    border-radius: 27px;\n    &:hover {\n        background: rgba(0, 0, 0, .1);\n    }\n    &.active {\n        background: url('https://y.gtimg.cn/mediastyle/yqq/img/wave.gif?max_age=2592000&v=78979d47cc7dc55cab5d36b4c96168d5') 90% 20px no-repeat;\n        background-color: rgba(0, 0, 0, .2);\n        background-size: 12px;\n    }\n`;\n\nexport const ReturnBtn = styled.span`\n    display: inline-block;\n    cursor: pointer;\n    font-size: 16px;\n    margin: 50px 0 20px 86px;\n    color: #333;\n    padding: 10px 25px;\n    border-radius: 25px;\n    background: rgba(0, 0, 0, .1);\n    &:hover {\n        background: rgba(0, 0, 0, .2);\n    }\n`;\n\nexport const MusicPlayingIcon = styled.img`\n    display: block;\n    width: 16px;\n    height: 16px;\n`;","import React, { Component, Fragment } from 'react';\nimport { \n\tMenuWrapper,\n\tMenu,\n\tMenuCover,\n\tMenuText,\n\tMusicWrapper,\n\tMusicContent,\n\tReturnBtn,\n\tMusicItem\n} from './style.js';\n\ninterface MenuProps {\n    list: MusicCategory[],\n\t\tmusic: Music,\n\t\tonClickMusic: Function\n}\n\ninterface MenuState {\n    category: Number\n}\n\nexport default class Menus extends Component<MenuProps, MenuState> {\n  state = {\n      category: -1,\n\t}\n\thanleMenuClick(category: Number) {\n\t\tthis.setState({ category });\n\t}\n\thandleReturnClick() {\n\t\tthis.setState({ category: -1 });\n\t}\n  render() {\n\t\tconst menu: MusicCategory | undefined = this.props.list.find(item => item.category === this.state.category);\n\t\tconst [curCateId, curMusicId] = this.props.music.id;\n\t\tlet contents: any;\n\t\tif (menu) {\n\t\t\tcontents = menu.musics.map((music, index) => {\n\t\t\t\tconst [cateId, musicId] = music.id;\n\t\t\t\treturn (\n\t\t\t\t\t<MusicItem \n\t\t\t\t\t\tkey={musicId} \n\t\t\t\t\t\tclassName={cateId === curCateId && musicId === curMusicId ? 'active': ''} \n\t\t\t\t\t\tonClick={() => { this.props.onClickMusic(music) }}>\n\t\t\t\t\t\t\t{String(index + 1)+ '. ' + music.name}\n\t\t\t\t\t</MusicItem>\n\t\t\t\t)\n\t\t\t})\n\t\t\tcontents = (\n\t\t\t\t<MusicWrapper>\n\t\t\t\t\t<ReturnBtn onClick={this.handleReturnClick.bind(this)} className=\"iconfont icon-fanhui\"></ReturnBtn>\n\t\t\t\t\t<MusicContent>{contents}</MusicContent>\n\t\t\t\t</MusicWrapper>\n\t\t\t)\n\t\t} else {\n\t\t\tcontents = this.props.list.map(cate => {\n\t\t\t\treturn (\n\t\t\t\t\t<Menu onClick={this.hanleMenuClick.bind(this, cate.category)} key={cate.category}>\n\t\t\t\t\t\t<MenuCover src={cate.cover}></MenuCover>\n\t\t\t\t\t\t<MenuText>{cate.name}</MenuText>\n\t\t\t\t\t</Menu>\n\t\t\t\t)\n\t\t\t})\n\t\t}\n\t\treturn <MenuWrapper>{contents}</MenuWrapper>\n  }\n}\n","import styled from 'styled-components';\n\nexport const PlayBarWrapper = styled.div`\n    position: fixed;\n    bottom: 0;\n    height: 110px;\n    box-sizing: border-box;\n    padding: 34px 120px;\n    width: 100%;\n    background: white;\n    box-shadow: 0 -5px 5px #ddd;\n    display: flex;\n`;\n\nexport const ControlBtn = styled.div`\n    display: inline-block;\n    width: 220px;\n`;\n\nexport const Btn = styled.span`\n    display: inline-block;\n    width: 40px;\n    margin-left: 30px;\n    cursor: pointer;\n    &.iconfont {\n        font-size: 35px!important;\n        color: #333;\n    }\n`;\n\nexport const Progress = styled.div`\n    display: inline-block;\n    flex: 1;\n    height: 100%;\n    position: relative;\n    padding: 0 2%;\n    box-sizing: border-box;\n    font-size: 14px;\n`;\n\nexport const ProgressTitle = styled.div`\n    float: left;\n`;\n\nexport const ProgressBar = styled.div`\n    background: #ddd;\n    height: 4px;\n    width: 100%;\n    background: #eee;\n    border-radius: 2px;\n    margin-top: 28px;\n    cursor: pointer;\n`;\n\nexport const ProgressContent = styled.div`\n    background: #999;\n    border-radius: 2px;\n    height: 100%;\n    position: relative;\n    &::after {\n        content: '';\n        height: 8px;\n        width: 8px;\n        border-radius: 4px;\n        background: white;\n        box-shadow: 0 0 4px #999;\n        position: absolute;\n        right: -4px;\n        top: -2px;\n    }\n`;\n\nexport const ProgressTime = styled.div`\n    float: right;\n`;\n\nexport const Voice = styled.div`\n    display: flex;\n    align-items: center;\n    width: 220px;\n`;\n\nexport const VoiceIcon = styled.span`\n    padding: 12px 20px;\n    &.iconfont {\n        font-size: 22px;\n        color: #333;\n    }\n\n`;\n\nexport const VoiceBar = styled.div`\n    flex: 1;\n    background: #ddd;\n    height: 4px;\n    width: calc(100% - 160px);\n    background: #eee;\n    border-radius: 2px;\n    cursor: pointer;\n`;\n\nexport const VoiceContent = styled.div`\n    background: #999;\n    border-radius: 2px;\n    height: 100%;\n    position: relative;\n    &::after {\n        content: '';\n        height: 8px;\n        width: 8px;\n        border-radius: 4px;\n        background: white;\n        box-shadow: 0 0 4px #999;\n        position: absolute;\n        right: -4px;\n        top: -2px;\n    }\n`;","import React, { Component } from 'react';\nimport { \n    PlayBarWrapper, \n    ControlBtn, \n    Btn,\n    Progress,\n    ProgressTitle,\n    ProgressBar,\n    ProgressTime,\n    ProgressContent,\n    Voice,\n    VoiceIcon,\n    VoiceBar,\n    VoiceContent\n} from './style.js';\n\ninterface PlayBarProps {\n    list: MusicCategory[],\n    music: Music,\n    onClickMusic: Function\n}\n\ninterface PlayBarState {\n    isPause: boolean,\n    currentTime: number,\n    duration: number,\n    ratio: string,\n    voiceRatio: string\n}\n\nexport default class PlayBar extends Component<PlayBarProps, PlayBarState> {\n  audioElement: HTMLAudioElement | null = null;\n  state = {\n      isPause: true,\n      currentTime: 0,\n      duration: 0,\n      ratio: this.getRatio(0),\n      voiceRatio: this.getRatio(1, 1)\n  }\n  constructor(props: PlayBarProps) {\n      super(props);\n  }\n  componentDidUpdate() {\n      document.title = this.props.music.name || '正在播放...';\n  }\n  pause() {\n      this.audioElement && this.audioElement.pause();\n  }\n  play() {\n      this.audioElement && this.audioElement.play();\n  }\n  getTimeString(time: number): string {\n    const m = ('0' + Math.floor(time / 60)).substring(0, 2);\n    const s = ('0' + Math.floor(time % 60)).substring(0, 2);\n    return m + ':' + s;\n  }\n  getRatio(now: number = 0, total: number = 0): string {\n    return total === 0 ? '0%' : (now / total) * 100 + '%';\n  }\n  handlePausePlay() {\n      if (!this.audioElement) return;\n      if (this.audioElement.readyState === 0) {\n        this.props.onClickMusic(this.props.list[0].musics[0]);\n      } else {\n        this.state.isPause ? this.play() : this.pause();\n        this.setState(state => ({ isPause: !state.isPause }));\n      }\n  }\n  handleTimeupdate() {\n    if (!this.audioElement) return;\n    const { currentTime, duration } = this.audioElement;\n    this.setState({\n      currentTime: currentTime || 0,\n      duration: duration || 0,\n      ratio: this.getRatio(currentTime, duration),\n    });\n  }\n  handleAudioPlay() {\n    this.setState(state => ({ isPause: false }));\n  }\n  handlePrevClick() {\n    this.jumpMusic(-1);\n  }\n  handleNextClick() {\n    this.jumpMusic(1);\n  }\n  handleProgressClick(event: any) {\n    const ratio = this.getOffsetRatio(event);\n    const currentTime = ratio * this.state.duration;\n    this.audioElement && (this.audioElement.currentTime = currentTime);\n  }\n  handleVoiceClick(event: any) {\n    const ratio = this.getOffsetRatio(event);\n    this.audioElement && (this.audioElement.volume = ratio);\n    this.setState({voiceRatio: ratio * 100 + '%'});\n  }\n  getOffsetRatio(event: any): number {\n    const { width, left } = event.currentTarget.getBoundingClientRect();\n    const ratio = (event.clientX - left) / width;\n    return ratio > 1 ? 1 : (ratio < 0 ? 0 : ratio);\n  }\n  jumpMusic(offset: number) {\n    const [curCateId, curMusicId] = this.props.music.id;\n    this.props.list.forEach(cate => {\n      if (cate.category === curCateId) {\n        const length = cate.musics.length;\n        const index = cate.musics.findIndex(music => music.id[1] === curMusicId);\n        const nextIndex = (offset % length + length + index) % length;\n        this.props.onClickMusic(cate.musics[nextIndex]);\n        return;\n      }\n    });\n  }\n  render() {\n      const playclass = 'iconfont icon-' + (this.state.isPause ? 'bofang' : 'zanting');\n      const currentTimeStr = this.getTimeString(this.state.currentTime);\n      const durationStr = this.getTimeString(this.state.duration);\n      return (\n          <PlayBarWrapper>\n              <ControlBtn>\n                  <Btn className=\"iconfont icon-shangyishou1\" onClick={this.handlePrevClick.bind(this)}></Btn>\n                  <Btn className={playclass} onClick={this.handlePausePlay.bind(this)}></Btn>\n                  <Btn className=\"iconfont icon-xiayishou\" onClick={this.handleNextClick.bind(this)}></Btn>\n              </ControlBtn>\n              <Progress>\n                <ProgressTitle>{this.props.music.name}</ProgressTitle>\n                <ProgressTime>{currentTimeStr + ' / ' + durationStr}</ProgressTime>\n                <ProgressBar onClick={this.handleProgressClick.bind(this)}>\n                  <ProgressContent style={{ width: this.state.ratio}}></ProgressContent>\n                </ProgressBar>\n              </Progress>\n              <Voice>\n                <VoiceIcon className=\"iconfont icon-shengyin\"></VoiceIcon>\n                <VoiceBar onClick={this.handleVoiceClick.bind(this)}>\n                  <VoiceContent style={{ width: this.state.voiceRatio }}></VoiceContent>\n                </VoiceBar>\n              </Voice>\n              <audio \n                autoPlay \n                src={this.props.music.src} \n                ref={el => this.audioElement = el}\n                onPlay={this.handleAudioPlay.bind(this)}\n                onTimeUpdate={this.handleTimeupdate.bind(this)}\n                onEnded={this.handleNextClick.bind(this)}></audio>\n          </PlayBarWrapper>\n      )\n  }\n}\n","import styled from 'styled-components';\n\nexport const CommentWrapper = styled.div`\n    position: absolute;\n    right: 10%;\n    top 10%;\n    width: 25%;\n    height: 80%;\n    overflow: auto;\n    margin: auto;\n    background: white;\n    box-shadow: 0 0 10px #ddd;\n    border-radius: 4px;\n`;","import React from 'react';\nimport { CommentWrapper } from './style.js';\n\nconst App: React.FC = () => {\n  return (\n    <CommentWrapper>\n        comment\n    </CommentWrapper>\n  );\n}\n\nexport default App;\n","import styled from 'styled-components';\n\nexport const MusicWrapper = styled.div`\n    width: 100%;\n    height: calc(100% - 110px);\n    background: #efefef;\n    position: relative;\n`;","import React, { Component, Fragment } from 'react';\n\nimport Menu from './menu/index';\nimport Player from './playbar/index';\nimport Comment from './comment/index';\nimport musicList from './data/music.json';\nimport { MusicWrapper } from './style.js';\n\ninterface MusicPlayState {\n  music: Music,\n  musicList: MusicCategory[]\n}\n\nexport default class MusicPlay extends Component<any, MusicPlayState> {\n  state = {\n    music: {\n      id: [0, 0],\n      name: '选择歌曲播放吧',\n      src: ''\n    },\n    musicList\n  }\n  constructor(arg: any) {\n    super(arg);\n    this.handleChangeMusic = this.handleChangeMusic.bind(this);\n  }\n  handleChangeMusic(music: Music) {\n    this.setState({ music });\n  }\n  render() {\n    return (\n      <Fragment>\n        <MusicWrapper>\n          <Menu list={this.state.musicList} music={this.state.music} onClickMusic={this.handleChangeMusic}></Menu>\n          <Comment></Comment>\n        </MusicWrapper>\n        <Player list={this.state.musicList} music={this.state.music} onClickMusic={this.handleChangeMusic}></Player>\n      </Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport { GlobalStyle } from './style.js';\n\nimport Music from './music/index';\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"app\">\n      <GlobalStyle />\n      <Music />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './static/font/iconfont.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}